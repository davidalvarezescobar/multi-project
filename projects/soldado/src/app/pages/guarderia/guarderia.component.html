<h5 *ngIf="ventana === 'datos'">Guardería: Registro diaria</h5>
<h5 *ngIf="ventana === 'historial'">Guardería: Histórico información diaria</h5>

<div>
    <div *ngIf="ventana === 'historial'">
        <details class="details">
            <summary>Filtros:</summary>
            <form>
                <fieldset>
                    <div class="filtros">
                        <label for="nombre">
                            Nombre del niño/a:
                            <select [value]="reserva?.nombre">
                                <option value="" selected>Seleccione nombre</option>
                                <option *ngFor="let nombre of nombres" [value]="nombre"
                                    [selected]="reserva?.nombre === nombre">{{ nombre }}</option>
                            </select>
                        </label>
                        <label>
                            Desde:
                            <input type="date" [value]="formatDateDDMMYYYY(fechaActual)">
                        </label>
                        <label>
                            Hasta:
                            <input type="date" [value]="formatDateDDMMYYYY(fechaActual)">
                        </label>
                        <label for="fruit">
                            Turno:
                            <select id="fruit" required>
                                <option value="" selected>Seleccione turno</option>
                                <option *ngFor="let turno of turnos" [value]="turno">{{ turno }}</option>
                            </select>
                        </label>
                    </div>
                </fieldset>
            </form>
        </details>

        <div class="lista-historial">
            <figure>
                <table>
                    <thead>
                        <tr>
                            <th scope="col">Niño/a:</th>
                            <th scope="col">Fecha</th>
                            <th scope="col">Turno</th>
                            <th scope="col">Desayuno</th>
                            <th scope="col">Comida</th>
                            <th scope="col">Merienda</th>
                            <th scope="col">Deposiciones</th>
                            <th scope="col">Pis</th>
                            <th scope="col">Siesta</th>
                            <th scope="col"></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let reserva of reservas">
                            <th scope="row">{{reserva.nombre}}</th>
                            <td>{{formatDateConMesEscritoDDMM(reserva.fechaEntrada)}}</td>
                            <td>{{reserva.turno}}</td>
                            <td>{{reserva.desayuno}}</td>
                            <td>{{reserva.almuerzo}}</td>
                            <td>{{reserva.merienda}}</td>
                            <td>{{reserva.deposiciones}}</td>
                            <td><i class="pis-siesta-checkbox" *ngIf="reserva.pis" class="fa-solid fa-check"></i></td>
                            <td><i class="pis-siesta-checkbox" *ngIf="reserva.siesta" class="fa-solid fa-check"></i>
                            </td>
                            <td><a href="javascript:void(0)" (click)="setEditReserva(reserva)"><i
                                        class="pencil"></i></a></td>
                        </tr>
                    </tbody>
                </table>
            </figure>
        </div>
    </div>

    <div *ngIf="ventana === 'datos'">
        <div class="fecha-turno">
            <label for="nombre">
                Nombre del niño/a:
                <select>
                    <option value="" selected>Seleccione nombre</option>
                    <option *ngFor="let nombre of nombres" [value]="nombre" [selected]="reserva?.nombre === nombre">{{
                        nombre }}</option>
                </select>
            </label>
            <label>
                Fecha:
                <input type="date"
                    [value]="reserva ? formatDateDDMMYYYY(reserva.fechaEntrada) : formatDateDDMMYYYY(fechaActual)">
            </label>
            <label for="fruit">
                Turno:
                <select id="fruit">
                    <option>Seleccione un turno</option>
                    <option *ngFor="let turno of turnos" [selected]="reserva?.turno === turno" [value]="turno">{{ turno
                        }}</option>
                </select>
            </label>
            <label for="autorizacion_recogida">
                <input type="checkbox" id="autorizacion_recogida" name="autorizacion_recogida"
                    [checked]="reserva?.autorizacion === true" #salidaCheckbox
                    (change)="cAutorizadoChange(salidaCheckbox.checked)">
                Autorización Recogida
                <input type="text" id="nombreAutorizado" name="nombre" placeholder="Introduzca persona autorizada"
                    [value]="reserva?.autorizado" [disabled]="!autorizado">
            </label>
        </div>
        <div class="tabs">
            <a href="javascript:void(0)" (click)="monitorDatos()" id="monitorDatos" role="button" class="monitor-button"
                type="button">Monitor</a>
            <a href="javascript:void(0)" (click)="padresDatos()" id="padresDatos" role="button" class="padres-button"
                type="button">Padres</a>
        </div>
        <div class="monitor-data-container" *ngIf="ventanaDatos === 'monitor'">
            <div>
                <figure class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th scope="col">Alimentación</th>
                                <th scope="col">Nada</th>
                                <th scope="col">Poco</th>
                                <th scope="col">Bastante</th>
                                <th scope="col">Todo</th>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Desayuno</td>
                                <td><input type="radio" name="desayuno" value="nada"
                                        [checked]="reserva?.desayuno === 'Nada'">
                                </td>
                                <td><input type="radio" name="desayuno" value="poco"
                                        [checked]="reserva?.desayuno === 'Poco'">
                                </td>
                                <td><input type="radio" name="desayuno" value="bastante"
                                        [checked]="reserva?.desayuno === 'Bastante'"></td>
                                <td><input type="radio" name="desayuno" value="todo"
                                        [checked]="reserva?.desayuno === 'Todo'">
                                </td>
                            </tr>
                            <tr>
                                <td>Almuerzo</td>
                                <td><input type="radio" name="almuerzo" value="nada"
                                        [checked]="reserva?.almuerzo=== 'Nada'">
                                </td>
                                <td><input type="radio" name="almuerzo" value="poco"
                                        [checked]="reserva?.almuerzo === 'Poco'">
                                </td>
                                <td><input type="radio" name="almuerzo" value="bastante"
                                        [checked]="reserva?.almuerzo === 'Bastante'"></td>
                                <td><input type="radio" name="almuerzo" value="todo"
                                        [checked]="reserva?.almuerzo === 'Todo'">
                                </td>
                            </tr>
                            <tr>
                                <td>Merienda</td>
                                <td><input type="radio" name="merienda" value="nada"
                                        [checked]="reserva?.merienda === 'Nada'">
                                </td>
                                <td><input type="radio" name="merienda" value="poco"
                                        [checked]="reserva?.merienda === 'Poco'">
                                </td>
                                <td><input type="radio" name="merienda" value="bastante"
                                        [checked]="reserva?.merienda === 'Bastante'"></td>
                                <td><input type="radio" name="merienda" value="todo"
                                        [checked]="reserva?.merienda === 'Todo'">
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </figure>
            </div>
            <div class="datos-extra-container">
                <div class="deposiciones-container">
                    <label for="deposiciones">Deposiciones:</label>
                    <select id="deposiciones" [value]="reserva?.deposiciones">
                        <option value="" selected>Tipo deposicion</option>
                        <option *ngFor="let deposicion of deposiciones" [value]="deposicion"
                            [selected]="reserva?.deposiciones === deposicion">{{ deposicion }}</option>
                    </select>
                </div>
            </div>
            <div class="pissiesta">
                <label>
                    Pis:
                    <input type="checkbox" id="pis" name="pis" [checked]="reserva?.pis">
                </label>
                <label>
                    Siesta:
                    <input type="checkbox" id="siesta" name="siesta" [checked]="reserva?.siesta">
                </label>
            </div>
            <div class="observaciones-Monitor-container">
                <label for="observaciones-Monitor">Observaciones:</label>
                <textarea id="observaciones-Monitor" class="observaciones-Monitor"
                    [value]="reserva?.observacionesMonitora" name="observaciones-Monitor" cols="50"></textarea>
            </div>
        </div>

        <div class="padres-data-container" *ngIf="ventanaDatos == 'padres'">
            <div class="intolerancias-container">
                <label>
                    Intolerancias:
                    <details role="list">
                        <summary aria-haspopup="listbox">
                            Intolerancias</summary>
                        <ul role="listbox">
                            <li *ngFor="let intolerancia of intolerancias; let i = index">
                                <label>
                                    <input type="checkbox" aria-label="intolerancias" (change)="toggleVisibilidad(i)"
                                        [checked]="intoleranciasSeleccionadas[i]">
                                    {{intolerancia}}
                                </label>
                            </li>
                        </ul>
                    </details>
                </label>

                <div class="intolerancias-container__elegidas">
                    <a href="javascript:void(0)" [hidden]="!intoleranciasSeleccionadas[i]"
                        *ngFor="let intolerancia of intolerancias; let i = index" role="button"
                        class="outline">{{intolerancia}}</a>
                </div>
            </div>

            <div class="observaciones-container">
                <label for="observaciones">Observaciones:</label>
                <textarea id="observaciones" class="observaciones" name="observaciones" rows="3" cols="50"
                    [value]="reserva?.observacionesPadre"></textarea>

            </div>
        </div>
        <footer>
            <a href="javascript:void(0)" *ngIf="!nuevaReserva" (click)="setVentana('historial')" role="button"
                type="button">Volver</a>
            <a href="javascript:void(0)" *ngIf="nuevaReserva" (click)="setVentana('historial')" role="button"
                type="button">Histórico</a>
            <a href="javascript:void(0)" (click)="openModalGuardar()" role="button" type="button">Guardar</a>
        </footer>
    </div>
</div>

<dialog id="modal-guardar" [attr.open]="guardar">
    <article>
        <a (click)="closeModalGuardar()" aria-label="Close" class="close"></a>
        <div class="modal-container">
            <strong>Datos guardados.</strong><br><br>
            <a href="javascript:void(0)" (click)="closeModalGuardar()" role="button" type="button">Volver</a>
        </div>
    </article>
</dialog>